{% extends 'staff_template/base_template.html' %}

{% block page_title %}Advisor Pending Subjects{% endblock page_title %}

{% block main_content %}
<h3>Pending Subject Approvals</h3>

{% if pending_requests %}
<table class="table table-hover">
    <thead>
        <tr>
            <th>Student Name</th>
            <th>Subject</th>
            <th>Status</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for request in pending_requests %}
        <tr>
            <td>{{ request.student.admin.first_name }} {{ request.student.admin.last_name }}</td>
            <td>{{ request.subject.subject_name }}</td>
            <td>
              {% if request.is_approved == True %}
                <span class="badge bg-success">Approved</span>
              {% elif request.is_approved == False %}
                <span class="badge bg-danger">Rejected</span>
              {% else %}
                <span class="badge bg-warning text-dark">Pending</span>
              {% endif %}
            </td>
            <td>
                <a href="{% url 'advisor_approve_subject' request.id %}" class="btn btn-success btn-sm" onclick="return confirm('Are you sure you want to approve this subject?')">Approve</a>
                <a href="{% url 'advisor_reject_subject' request.id %}" class="btn btn-danger btn-sm" onclick="return confirm('Are you sure you want to reject this subject?')">Reject</a>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% else %}
<p class="text-muted">No pending requests found.</p>
{% endif %}

{% endblock main_content %}
